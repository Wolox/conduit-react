config:
  dockerfile: .woloxci/Dockerfile
  project_name: conduit-react

steps:
  cypress:
    - mkdir -p /home/node/.npm-global \
        && npm config set prefix '/home/node/.npm-global' \
        && echo "export PATH=/home/node/.npm-global/bin:$PATH" >> /home/node/.profile
    - . /home/node/.profile
    - chown -R 498:0  $(npm config get prefix)
    - chown -R 498:0  /home/node/
    - npx cypress run
  lint:
    - ln -sfn /home/node/node_modules node_modules
    - npm run ts-check
    - npm run lint
    - npm run lint-scss
    
environment:
  GIT_COMMITTER_NAME: a
  GIT_COMMITTER_EMAIL: b
  LANG: C.UTF-8
